{"version":3,"sources":["webpack://wp/webpack/bootstrap","webpack://wp/./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack://wp/./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack://wp/./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack://wp/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://wp/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://wp/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://wp/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://wp/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://wp/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://wp/./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack://wp/./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack://wp/./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack://wp/./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack://wp/./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack://wp/./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack://wp/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://wp/./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack://wp/./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack://wp/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://wp/./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack://wp/@wordpress/media-utils/src/components/index.js","webpack://wp/@wordpress/media-utils/src/components/media-upload/index.js","webpack://wp/@wordpress/media-utils/src/index.js","webpack://wp/@wordpress/media-utils/src/utils/index.js","webpack://wp/@wordpress/media-utils/src/utils/upload-media.js","webpack://wp/external {\"this\":\"regeneratorRuntime\"}","webpack://wp/external {\"this\":[\"wp\",\"apiFetch\"]}","webpack://wp/external {\"this\":[\"wp\",\"blob\"]}","webpack://wp/external {\"this\":[\"wp\",\"element\"]}","webpack://wp/external {\"this\":[\"wp\",\"i18n\"]}","webpack://wp/external {\"this\":\"lodash\"}"],"names":["window","wp","getFeaturedImageMediaFrame","media","view","MediaFrame","Select","extend","featuredImageToolbar","toolbar","createSelectToolbar","text","l10n","setFeaturedImage","state","options","editState","selection","get","EditImage","model","single","controller","render","content","set","loadEditor","createStates","on","states","add","FeaturedImage","editImage","getGalleryDetailsMediaFrame","Post","galleryToolbar","editing","Toolbar","items","insert","style","updateGallery","insertGallery","priority","requires","library","click","close","trigger","setState","reset","Library","id","title","createGalleryTitle","filterable","multiple","editable","query","defaults","type","GalleryEdit","menu","displaySettings","GalleryAdd","slimImageObject","img","attrSet","pick","getAttachmentsCollection","ids","order","orderby","post__in","posts_per_page","MediaUpload","allowedTypes","gallery","unstableFeaturedImageFlow","modalClass","__","arguments","openModal","bind","onOpen","onSelect","onUpdate","onClose","buildAndSetGalleryFrame","frameConfig","frame","$el","addClass","buildAndSetFeatureImageFrame","initializeListeners","props","addToGallery","value","lastGalleryValue","remove","currentState","GalleryDetailsMediaFrame","attachments","Selection","models","toJSON","mimeType","featuredImageFrame","selections","selectedImages","length","map","attachment","updateCollection","castArray","forEach","more","frameContent","collection","toArray","mirroring","_hasMore","open","Component","getMimeTypesArray","wpMimeTypesObject","flatMap","mime","extensionsString","split","extensions","extension","uploadMedia","additionalData","filesList","maxUploadFileSize","onError","noop","onFileChange","wpAllowedMimeTypes","files","filesSet","setAndUpdateFiles","idx","revokeBlobURL","compact","isAllowedType","fileType","some","allowedType","includes","startsWith","allowedMimeTypesForUser","isAllowedMimeTypeForUser","triggerError","error","message","file","name","validFiles","mediaFile","code","size","push","url","createBlobURL","createMediaFromFile","savedMedia","mediaObject","omit","alt","alt_text","caption","raw","source_url","has","sprintf","data","FormData","append","replace","key","apiFetch","path","body","method"],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFA;AAAA;AAAe;AACf;;AAEA,wCAAwC,SAAS;AACjD;AACA;;AAEA;AACA,C;;;;;;;;;;;;ACRA;AAAA;AAAe;AACf;AACA,C;;;;;;;;;;;;ACFA;AAAA;AAAA;AAAkD;AACnC;AACf,iCAAiC,iEAAgB;AACjD,C;;;;;;;;;;;;ACHA;AAAA;AAAe;AACf;AACA;AACA;;AAEA;AACA,C;;;;;;;;;;;;ACNA;AAAA;AAAA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA,C;;;;;;;;;;;;AClCA;AAAA;AAAe;AACf;AACA;AACA;AACA,C;;;;;;;;;;;;ACJA;AAAA;AAAA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe;AACf;AACA;AACA;AACA,C;;;;;;;;;;;;ACdA;AAAA;AAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA,C;;;;;;;;;;;;ACbA;AAAA;AAAe;AACf;AACA;AAC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","file":"media-utils.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./node_modules/@wordpress/media-utils/build-module/index.js\");\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export { default as MediaUpload } from './media-upload';\n","/**\n * External dependencies\n */\nimport { castArray, defaults, pick } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\nconst { wp } = window;\n\n/**\n * Prepares the Featured Image toolbars and frames.\n *\n * @return {wp.media.view.MediaFrame.Select} The default media workflow.\n */\nconst getFeaturedImageMediaFrame = () => {\n\treturn wp.media.view.MediaFrame.Select.extend( {\n\t\t/**\n\t\t * Enables the Set Featured Image Button.\n\t\t *\n\t\t * @param {Object} toolbar toolbar for featured image state\n\t\t * @return {void}\n\t\t */\n\t\tfeaturedImageToolbar( toolbar ) {\n\t\t\tthis.createSelectToolbar( toolbar, {\n\t\t\t\ttext: wp.media.view.l10n.setFeaturedImage,\n\t\t\t\tstate: this.options.state,\n\t\t\t} );\n\t\t},\n\n\t\t/**\n\t\t * Handle the edit state requirements of selected media item.\n\t\t *\n\t\t * @return {void}\n\t\t */\n\t\teditState() {\n\t\t\tconst selection = this.state( 'featured-image' ).get( 'selection' );\n\t\t\tconst view = new wp.media.view.EditImage( {\n\t\t\t\tmodel: selection.single(),\n\t\t\t\tcontroller: this,\n\t\t\t} ).render();\n\n\t\t\t// Set the view to the EditImage frame using the selected image.\n\t\t\tthis.content.set( view );\n\n\t\t\t// After bringing in the frame, load the actual editor via an ajax call.\n\t\t\tview.loadEditor();\n\t\t},\n\n\t\t/**\n\t\t * Create the default states.\n\t\t *\n\t\t * @return {void}\n\t\t */\n\t\tcreateStates: function createStates() {\n\t\t\tthis.on(\n\t\t\t\t'toolbar:create:featured-image',\n\t\t\t\tthis.featuredImageToolbar,\n\t\t\t\tthis\n\t\t\t);\n\t\t\tthis.on( 'content:render:edit-image', this.editState, this );\n\n\t\t\tthis.states.add( [\n\t\t\t\tnew wp.media.controller.FeaturedImage(),\n\t\t\t\tnew wp.media.controller.EditImage( {\n\t\t\t\t\tmodel: this.options.editImage,\n\t\t\t\t} ),\n\t\t\t] );\n\t\t},\n\t} );\n};\n\n/**\n * Prepares the Gallery toolbars and frames.\n *\n * @return {wp.media.view.MediaFrame.Post} The default media workflow.\n */\nconst getGalleryDetailsMediaFrame = () => {\n\t/**\n\t * Custom gallery details frame.\n\t *\n\t * @see https://github.com/xwp/wp-core-media-widgets/blob/905edbccfc2a623b73a93dac803c5335519d7837/wp-admin/js/widgets/media-gallery-widget.js\n\t * @class GalleryDetailsMediaFrame\n\t * @class\n\t */\n\treturn wp.media.view.MediaFrame.Post.extend( {\n\t\t/**\n\t\t * Set up gallery toolbar.\n\t\t *\n\t\t * @return {void}\n\t\t */\n\t\tgalleryToolbar() {\n\t\t\tconst editing = this.state().get( 'editing' );\n\t\t\tthis.toolbar.set(\n\t\t\t\tnew wp.media.view.Toolbar( {\n\t\t\t\t\tcontroller: this,\n\t\t\t\t\titems: {\n\t\t\t\t\t\tinsert: {\n\t\t\t\t\t\t\tstyle: 'primary',\n\t\t\t\t\t\t\ttext: editing\n\t\t\t\t\t\t\t\t? wp.media.view.l10n.updateGallery\n\t\t\t\t\t\t\t\t: wp.media.view.l10n.insertGallery,\n\t\t\t\t\t\t\tpriority: 80,\n\t\t\t\t\t\t\trequires: { library: true },\n\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * @fires wp.media.controller.State#update\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tclick() {\n\t\t\t\t\t\t\t\tconst controller = this.controller,\n\t\t\t\t\t\t\t\t\tstate = controller.state();\n\n\t\t\t\t\t\t\t\tcontroller.close();\n\t\t\t\t\t\t\t\tstate.trigger(\n\t\t\t\t\t\t\t\t\t'update',\n\t\t\t\t\t\t\t\t\tstate.get( 'library' )\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t// Restore and reset the default state.\n\t\t\t\t\t\t\t\tcontroller.setState( controller.options.state );\n\t\t\t\t\t\t\t\tcontroller.reset();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t} )\n\t\t\t);\n\t\t},\n\n\t\t/**\n\t\t * Handle the edit state requirements of selected media item.\n\t\t *\n\t\t * @return {void}\n\t\t */\n\t\teditState() {\n\t\t\tconst selection = this.state( 'gallery' ).get( 'selection' );\n\t\t\tconst view = new wp.media.view.EditImage( {\n\t\t\t\tmodel: selection.single(),\n\t\t\t\tcontroller: this,\n\t\t\t} ).render();\n\n\t\t\t// Set the view to the EditImage frame using the selected image.\n\t\t\tthis.content.set( view );\n\n\t\t\t// After bringing in the frame, load the actual editor via an ajax call.\n\t\t\tview.loadEditor();\n\t\t},\n\n\t\t/**\n\t\t * Create the default states.\n\t\t *\n\t\t * @return {void}\n\t\t */\n\t\tcreateStates: function createStates() {\n\t\t\tthis.on( 'toolbar:create:main-gallery', this.galleryToolbar, this );\n\t\t\tthis.on( 'content:render:edit-image', this.editState, this );\n\n\t\t\tthis.states.add( [\n\t\t\t\tnew wp.media.controller.Library( {\n\t\t\t\t\tid: 'gallery',\n\t\t\t\t\ttitle: wp.media.view.l10n.createGalleryTitle,\n\t\t\t\t\tpriority: 40,\n\t\t\t\t\ttoolbar: 'main-gallery',\n\t\t\t\t\tfilterable: 'uploaded',\n\t\t\t\t\tmultiple: 'add',\n\t\t\t\t\teditable: false,\n\n\t\t\t\t\tlibrary: wp.media.query(\n\t\t\t\t\t\tdefaults(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: 'image',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tthis.options.library\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t} ),\n\t\t\t\tnew wp.media.controller.EditImage( {\n\t\t\t\t\tmodel: this.options.editImage,\n\t\t\t\t} ),\n\n\t\t\t\tnew wp.media.controller.GalleryEdit( {\n\t\t\t\t\tlibrary: this.options.selection,\n\t\t\t\t\tediting: this.options.editing,\n\t\t\t\t\tmenu: 'gallery',\n\t\t\t\t\tdisplaySettings: false,\n\t\t\t\t\tmultiple: true,\n\t\t\t\t} ),\n\n\t\t\t\tnew wp.media.controller.GalleryAdd(),\n\t\t\t] );\n\t\t},\n\t} );\n};\n\n// the media library image object contains numerous attributes\n// we only need this set to display the image in the library\nconst slimImageObject = ( img ) => {\n\tconst attrSet = [\n\t\t'sizes',\n\t\t'mime',\n\t\t'type',\n\t\t'subtype',\n\t\t'id',\n\t\t'url',\n\t\t'alt',\n\t\t'link',\n\t\t'caption',\n\t];\n\treturn pick( img, attrSet );\n};\n\nconst getAttachmentsCollection = ( ids ) => {\n\treturn wp.media.query( {\n\t\torder: 'ASC',\n\t\torderby: 'post__in',\n\t\tpost__in: ids,\n\t\tposts_per_page: -1,\n\t\tquery: true,\n\t\ttype: 'image',\n\t} );\n};\n\nclass MediaUpload extends Component {\n\tconstructor( {\n\t\tallowedTypes,\n\t\tgallery = false,\n\t\tunstableFeaturedImageFlow = false,\n\t\tmodalClass,\n\t\tmultiple = false,\n\t\ttitle = __( 'Select or Upload Media' ),\n\t} ) {\n\t\tsuper( ...arguments );\n\t\tthis.openModal = this.openModal.bind( this );\n\t\tthis.onOpen = this.onOpen.bind( this );\n\t\tthis.onSelect = this.onSelect.bind( this );\n\t\tthis.onUpdate = this.onUpdate.bind( this );\n\t\tthis.onClose = this.onClose.bind( this );\n\n\t\tif ( gallery ) {\n\t\t\tthis.buildAndSetGalleryFrame();\n\t\t} else {\n\t\t\tconst frameConfig = {\n\t\t\t\ttitle,\n\t\t\t\tmultiple,\n\t\t\t};\n\t\t\tif ( !! allowedTypes ) {\n\t\t\t\tframeConfig.library = { type: allowedTypes };\n\t\t\t}\n\n\t\t\tthis.frame = wp.media( frameConfig );\n\t\t}\n\n\t\tif ( modalClass ) {\n\t\t\tthis.frame.$el.addClass( modalClass );\n\t\t}\n\n\t\tif ( unstableFeaturedImageFlow ) {\n\t\t\tthis.buildAndSetFeatureImageFrame();\n\t\t}\n\t\tthis.initializeListeners();\n\t}\n\n\tinitializeListeners() {\n\t\t// When an image is selected in the media frame...\n\t\tthis.frame.on( 'select', this.onSelect );\n\t\tthis.frame.on( 'update', this.onUpdate );\n\t\tthis.frame.on( 'open', this.onOpen );\n\t\tthis.frame.on( 'close', this.onClose );\n\t}\n\n\t/**\n\t * Sets the Gallery frame and initializes listeners.\n\t *\n\t * @return {void}\n\t */\n\tbuildAndSetGalleryFrame() {\n\t\tconst {\n\t\t\taddToGallery = false,\n\t\t\tallowedTypes,\n\t\t\tmultiple = false,\n\t\t\tvalue = null,\n\t\t} = this.props;\n\t\t// If the value did not changed there is no need to rebuild the frame,\n\t\t// we can continue to use the existing one.\n\t\tif ( value === this.lastGalleryValue ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.lastGalleryValue = value;\n\n\t\t// If a frame already existed remove it.\n\t\tif ( this.frame ) {\n\t\t\tthis.frame.remove();\n\t\t}\n\t\tlet currentState;\n\t\tif ( addToGallery ) {\n\t\t\tcurrentState = 'gallery-library';\n\t\t} else {\n\t\t\tcurrentState = value ? 'gallery-edit' : 'gallery';\n\t\t}\n\t\tif ( ! this.GalleryDetailsMediaFrame ) {\n\t\t\tthis.GalleryDetailsMediaFrame = getGalleryDetailsMediaFrame();\n\t\t}\n\t\tconst attachments = getAttachmentsCollection( value );\n\t\tconst selection = new wp.media.model.Selection( attachments.models, {\n\t\t\tprops: attachments.props.toJSON(),\n\t\t\tmultiple,\n\t\t} );\n\t\tthis.frame = new this.GalleryDetailsMediaFrame( {\n\t\t\tmimeType: allowedTypes,\n\t\t\tstate: currentState,\n\t\t\tmultiple,\n\t\t\tselection,\n\t\t\tediting: value ? true : false,\n\t\t} );\n\t\twp.media.frame = this.frame;\n\t\tthis.initializeListeners();\n\t}\n\n\t/**\n\t * Initializes the Media Library requirements for the featured image flow.\n\t *\n\t * @return {void}\n\t */\n\tbuildAndSetFeatureImageFrame() {\n\t\tconst featuredImageFrame = getFeaturedImageMediaFrame();\n\t\tconst attachments = getAttachmentsCollection( this.props.value );\n\t\tconst selection = new wp.media.model.Selection( attachments.models, {\n\t\t\tprops: attachments.props.toJSON(),\n\t\t} );\n\t\tthis.frame = new featuredImageFrame( {\n\t\t\tmimeType: this.props.allowedTypes,\n\t\t\tstate: 'featured-image',\n\t\t\tmultiple: this.props.multiple,\n\t\t\tselection,\n\t\t\tediting: this.props.value ? true : false,\n\t\t} );\n\t\twp.media.frame = this.frame;\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.frame.remove();\n\t}\n\n\tonUpdate( selections ) {\n\t\tconst { onSelect, multiple = false } = this.props;\n\t\tconst state = this.frame.state();\n\t\tconst selectedImages = selections || state.get( 'selection' );\n\n\t\tif ( ! selectedImages || ! selectedImages.models.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( multiple ) {\n\t\t\tonSelect(\n\t\t\t\tselectedImages.models.map( ( model ) =>\n\t\t\t\t\tslimImageObject( model.toJSON() )\n\t\t\t\t)\n\t\t\t);\n\t\t} else {\n\t\t\tonSelect( slimImageObject( selectedImages.models[ 0 ].toJSON() ) );\n\t\t}\n\t}\n\n\tonSelect() {\n\t\tconst { onSelect, multiple = false } = this.props;\n\t\t// Get media attachment details from the frame state\n\t\tconst attachment = this.frame\n\t\t\t.state()\n\t\t\t.get( 'selection' )\n\t\t\t.toJSON();\n\t\tonSelect( multiple ? attachment : attachment[ 0 ] );\n\t}\n\n\tonOpen() {\n\t\tthis.updateCollection();\n\t\tif ( ! this.props.value ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( ! this.props.gallery ) {\n\t\t\tconst selection = this.frame.state().get( 'selection' );\n\t\t\tcastArray( this.props.value ).forEach( ( id ) => {\n\t\t\t\tselection.add( wp.media.attachment( id ) );\n\t\t\t} );\n\t\t}\n\n\t\t// load the images so they are available in the media modal.\n\t\tgetAttachmentsCollection( castArray( this.props.value ) ).more();\n\t}\n\n\tonClose() {\n\t\tconst { onClose } = this.props;\n\n\t\tif ( onClose ) {\n\t\t\tonClose();\n\t\t}\n\t}\n\n\tupdateCollection() {\n\t\tconst frameContent = this.frame.content.get();\n\t\tif ( frameContent && frameContent.collection ) {\n\t\t\tconst collection = frameContent.collection;\n\n\t\t\t// clean all attachments we have in memory.\n\t\t\tcollection\n\t\t\t\t.toArray()\n\t\t\t\t.forEach( ( model ) => model.trigger( 'destroy', model ) );\n\n\t\t\t// reset has more flag, if library had small amount of items all items may have been loaded before.\n\t\t\tcollection.mirroring._hasMore = true;\n\n\t\t\t// request items\n\t\t\tcollection.more();\n\t\t}\n\t}\n\n\topenModal() {\n\t\tif (\n\t\t\tthis.props.gallery &&\n\t\t\tthis.props.value &&\n\t\t\tthis.props.value.length > 0\n\t\t) {\n\t\t\tthis.buildAndSetGalleryFrame();\n\t\t}\n\t\tthis.frame.open();\n\t}\n\n\trender() {\n\t\treturn this.props.render( { open: this.openModal } );\n\t}\n}\n\nexport default MediaUpload;\n","export * from './components';\nexport * from './utils';\n","export { uploadMedia } from './upload-media';\n","/**\n * External dependencies\n */\nimport {\n\tcompact,\n\tflatMap,\n\tforEach,\n\tget,\n\thas,\n\tincludes,\n\tmap,\n\tnoop,\n\tomit,\n\tsome,\n\tstartsWith,\n} from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport apiFetch from '@wordpress/api-fetch';\nimport { createBlobURL, revokeBlobURL } from '@wordpress/blob';\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Browsers may use unexpected mime types, and they differ from browser to browser.\n * This function computes a flexible array of mime types from the mime type structured provided by the server.\n * Converts { jpg|jpeg|jpe: \"image/jpeg\" } into [ \"image/jpeg\", \"image/jpg\", \"image/jpeg\", \"image/jpe\" ]\n * The computation of this array instead of directly using the object,\n * solves the problem in chrome where mp3 files have audio/mp3 as mime type instead of audio/mpeg.\n * https://bugs.chromium.org/p/chromium/issues/detail?id=227004\n *\n * @param {?Object} wpMimeTypesObject Mime type object received from the server.\n *                                    Extensions are keys separated by '|' and values are mime types associated with an extension.\n *\n * @return {?Array} An array of mime types or the parameter passed if it was \"falsy\".\n */\nexport function getMimeTypesArray( wpMimeTypesObject ) {\n\tif ( ! wpMimeTypesObject ) {\n\t\treturn wpMimeTypesObject;\n\t}\n\treturn flatMap( wpMimeTypesObject, ( mime, extensionsString ) => {\n\t\tconst [ type ] = mime.split( '/' );\n\t\tconst extensions = extensionsString.split( '|' );\n\t\treturn [\n\t\t\tmime,\n\t\t\t...map( extensions, ( extension ) => `${ type }/${ extension }` ),\n\t\t];\n\t} );\n}\n\n/**\n *\tMedia Upload is used by audio, image, gallery, video, and file blocks to\n *\thandle uploading a media file when a file upload button is activated.\n *\n *\tTODO: future enhancement to add an upload indicator.\n *\n * @param   {Object}   $0                    Parameters object passed to the function.\n * @param   {?Array}   $0.allowedTypes       Array with the types of media that can be uploaded, if unset all types are allowed.\n * @param   {?Object}  $0.additionalData     Additional data to include in the request.\n * @param   {Array}    $0.filesList          List of files.\n * @param   {?number}  $0.maxUploadFileSize  Maximum upload size in bytes allowed for the site.\n * @param   {Function} $0.onError            Function called when an error happens.\n * @param   {Function} $0.onFileChange       Function called each time a file or a temporary representation of the file is available.\n * @param   {?Object}  $0.wpAllowedMimeTypes List of allowed mime types and file extensions.\n */\nexport async function uploadMedia( {\n\tallowedTypes,\n\tadditionalData = {},\n\tfilesList,\n\tmaxUploadFileSize,\n\tonError = noop,\n\tonFileChange,\n\twpAllowedMimeTypes = null,\n} ) {\n\t// Cast filesList to array\n\tconst files = [ ...filesList ];\n\n\tconst filesSet = [];\n\tconst setAndUpdateFiles = ( idx, value ) => {\n\t\trevokeBlobURL( get( filesSet, [ idx, 'url' ] ) );\n\t\tfilesSet[ idx ] = value;\n\t\tonFileChange( compact( filesSet ) );\n\t};\n\n\t// Allowed type specified by consumer\n\tconst isAllowedType = ( fileType ) => {\n\t\tif ( ! allowedTypes ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn some( allowedTypes, ( allowedType ) => {\n\t\t\t// If a complete mimetype is specified verify if it matches exactly the mime type of the file.\n\t\t\tif ( includes( allowedType, '/' ) ) {\n\t\t\t\treturn allowedType === fileType;\n\t\t\t}\n\t\t\t// Otherwise a general mime type is used and we should verify if the file mimetype starts with it.\n\t\t\treturn startsWith( fileType, `${ allowedType }/` );\n\t\t} );\n\t};\n\n\t// Allowed types for the current WP_User\n\tconst allowedMimeTypesForUser = getMimeTypesArray( wpAllowedMimeTypes );\n\tconst isAllowedMimeTypeForUser = ( fileType ) => {\n\t\treturn includes( allowedMimeTypesForUser, fileType );\n\t};\n\n\t// Build the error message including the filename\n\tconst triggerError = ( error ) => {\n\t\terror.message = [\n\t\t\t<strong key=\"filename\">{ error.file.name }</strong>,\n\t\t\t': ',\n\t\t\terror.message,\n\t\t];\n\n\t\tonError( error );\n\t};\n\n\tconst validFiles = [];\n\n\tfor ( const mediaFile of files ) {\n\t\t// verify if user is allowed to upload this mime type\n\t\tif (\n\t\t\tallowedMimeTypesForUser &&\n\t\t\t! isAllowedMimeTypeForUser( mediaFile.type )\n\t\t) {\n\t\t\ttriggerError( {\n\t\t\t\tcode: 'MIME_TYPE_NOT_ALLOWED_FOR_USER',\n\t\t\t\tmessage: __(\n\t\t\t\t\t'Sorry, this file type is not permitted for security reasons.'\n\t\t\t\t),\n\t\t\t\tfile: mediaFile,\n\t\t\t} );\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Check if the block supports this mime type\n\t\tif ( ! isAllowedType( mediaFile.type ) ) {\n\t\t\ttriggerError( {\n\t\t\t\tcode: 'MIME_TYPE_NOT_SUPPORTED',\n\t\t\t\tmessage: __( 'Sorry, this file type is not supported here.' ),\n\t\t\t\tfile: mediaFile,\n\t\t\t} );\n\t\t\tcontinue;\n\t\t}\n\n\t\t// verify if file is greater than the maximum file upload size allowed for the site.\n\t\tif ( maxUploadFileSize && mediaFile.size > maxUploadFileSize ) {\n\t\t\ttriggerError( {\n\t\t\t\tcode: 'SIZE_ABOVE_LIMIT',\n\t\t\t\tmessage: __(\n\t\t\t\t\t'This file exceeds the maximum upload size for this site.'\n\t\t\t\t),\n\t\t\t\tfile: mediaFile,\n\t\t\t} );\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Don't allow empty files to be uploaded.\n\t\tif ( mediaFile.size <= 0 ) {\n\t\t\ttriggerError( {\n\t\t\t\tcode: 'EMPTY_FILE',\n\t\t\t\tmessage: __( 'This file is empty.' ),\n\t\t\t\tfile: mediaFile,\n\t\t\t} );\n\t\t\tcontinue;\n\t\t}\n\n\t\tvalidFiles.push( mediaFile );\n\n\t\t// Set temporary URL to create placeholder media file, this is replaced\n\t\t// with final file from media gallery when upload is `done` below\n\t\tfilesSet.push( { url: createBlobURL( mediaFile ) } );\n\t\tonFileChange( filesSet );\n\t}\n\n\tfor ( let idx = 0; idx < validFiles.length; ++idx ) {\n\t\tconst mediaFile = validFiles[ idx ];\n\t\ttry {\n\t\t\tconst savedMedia = await createMediaFromFile(\n\t\t\t\tmediaFile,\n\t\t\t\tadditionalData\n\t\t\t);\n\t\t\tconst mediaObject = {\n\t\t\t\t...omit( savedMedia, [ 'alt_text', 'source_url' ] ),\n\t\t\t\talt: savedMedia.alt_text,\n\t\t\t\tcaption: get( savedMedia, [ 'caption', 'raw' ], '' ),\n\t\t\t\ttitle: savedMedia.title.raw,\n\t\t\t\turl: savedMedia.source_url,\n\t\t\t};\n\t\t\tsetAndUpdateFiles( idx, mediaObject );\n\t\t} catch ( error ) {\n\t\t\t// Reset to empty on failure.\n\t\t\tsetAndUpdateFiles( idx, null );\n\t\t\tlet message;\n\t\t\tif ( has( error, [ 'message' ] ) ) {\n\t\t\t\tmessage = get( error, [ 'message' ] );\n\t\t\t} else {\n\t\t\t\tmessage = sprintf(\n\t\t\t\t\t// translators: %s: file name\n\t\t\t\t\t__( 'Error while uploading file %s to the media library.' ),\n\t\t\t\t\tmediaFile.name\n\t\t\t\t);\n\t\t\t}\n\t\t\tonError( {\n\t\t\t\tcode: 'GENERAL',\n\t\t\t\tmessage,\n\t\t\t\tfile: mediaFile,\n\t\t\t} );\n\t\t}\n\t}\n}\n\n/**\n * @param {File}    file           Media File to Save.\n * @param {?Object} additionalData Additional data to include in the request.\n *\n * @return {Promise} Media Object Promise.\n */\nfunction createMediaFromFile( file, additionalData ) {\n\t// Create upload payload\n\tconst data = new window.FormData();\n\tdata.append( 'file', file, file.name || file.type.replace( '/', '.' ) );\n\tforEach( additionalData, ( value, key ) => data.append( key, value ) );\n\treturn apiFetch( {\n\t\tpath: '/wp/v2/media',\n\t\tbody: data,\n\t\tmethod: 'POST',\n\t} );\n}\n","(function() { module.exports = this[\"regeneratorRuntime\"]; }());","(function() { module.exports = this[\"wp\"][\"apiFetch\"]; }());","(function() { module.exports = this[\"wp\"][\"blob\"]; }());","(function() { module.exports = this[\"wp\"][\"element\"]; }());","(function() { module.exports = this[\"wp\"][\"i18n\"]; }());","(function() { module.exports = this[\"lodash\"]; }());"],"sourceRoot":""}